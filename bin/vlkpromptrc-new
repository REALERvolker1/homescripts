#!/usr/bin/bash
# shellcheck shell=bash
# vim:foldmethod=marker:ft=sh
# shellcheck disable=SC2317

[ -z "${ZSH_VERSION:-$BASH_VERSION}" ] && {
    return 1
    exit 1
}

declare -A vlkprompt

vlkprompt[dir_git_icon]=󰊢
vlkprompt[dir_vim_icon]=
vlkprompt[dir_ro_icon]=
vlkprompt[dir_rw_icon]=
vlkprompt[err_icon]=󰅗
vlkprompt[job_icon]=󱜯
vlkprompt[end_icon_sud]=' '
case "${ICON_TYPE:-}" in
dashline)
    vlkprompt[end_icon]=
    ;;
powerline)
    vlkprompt[end_icon]=
    ;;
*)
    vlkprompt[end_icon]=']'
    vlkprompt[dir_git_icon]='G'
    vlkprompt[dir_vim_icon]='V'
    vlkprompt[dir_ro_icon]='-'
    vlkprompt[dir_rw_icon]='.'
    vlkprompt[err_icon]='X'
    vlkprompt[job_icon]='J'
    vlkprompt[end_icon_sud]="${vlkprompt[end_icon]}"
    ;;
esac

vlkprompt[colorterm]="${VLKPROMPT_COLOR_OVERRIDE:-$(tput colors)}"

if ((vlkprompt[colorterm] < 8)); then
    return
elif ((vlkprompt[colorterm] < 256)); then
    vlkprompt[ansi_color_prefix]=''
    vlkprompt[light_color]=7
    vlkprompt[dark_color]=0
    vlkprompt[cwd_color]=4
    vlkprompt[git_color]=5
    vlkprompt[vim_color]=2
    vlkprompt[err_color]=1
    vlkprompt[job_color]=3
    vlkprompt[sud_color]=6
    vlkprompt[ps2_color]=5
    vlkprompt[ps3_color]=5
else
    vlkprompt[ansi_color_prefix]='8;5;'
    vlkprompt[light_color]=255
    vlkprompt[dark_color]=232
    vlkprompt[cwd_color]=33
    vlkprompt[git_color]=141
    vlkprompt[vim_color]=120
    vlkprompt[err_color]=52
    vlkprompt[job_color]=172
    vlkprompt[sud_color]=196
    vlkprompt[ps2_color]=93
    vlkprompt[ps3_color]=95
fi

vlkprompt[sgr]="\e[0m"

vlkprompt[light_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[light_color]}m"
vlkprompt[dark_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[dark_color]}m"
vlkprompt[cwd_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[cwd_color]}m"
vlkprompt[git_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[git_color]}m"
vlkprompt[vim_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[vim_color]}m"
vlkprompt[err_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[err_color]}m"
vlkprompt[job_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[job_color]}m"
vlkprompt[sud_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[sud_color]}m"
vlkprompt[ps2_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[ps2_color]}m"
vlkprompt[ps3_color_fg]="\e[1;3${vlkprompt[ansi_color_prefix]}${vlkprompt[ps3_color]}m"

vlkprompt[light_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[light_color]}m"
vlkprompt[dark_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[dark_color]}m"
vlkprompt[cwd_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[cwd_color]}m"
vlkprompt[git_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[git_color]}m"
vlkprompt[vim_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[vim_color]}m"
vlkprompt[err_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[err_color]}m"
vlkprompt[job_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[job_color]}m"
vlkprompt[sud_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[sud_color]}m"
vlkprompt[ps2_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[ps2_color]}m"
vlkprompt[ps3_color_bg]="\e[1;4${vlkprompt[ansi_color_prefix]}${vlkprompt[ps3_color]}m"


