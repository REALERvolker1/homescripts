#!/bin/sh
# shellcheck shell=dash

if [ -x '/var/lib/flatpak/exports/bin/com.valvesoftware.Steam' ]; then
    exec flatpak run --branch=stable --arch=x86_64 com.valvesoftware.Steam "$@"
else
    steampath="$(
        oldifs="$IFS"
        IFS=':'
        for i in $PATH; do
            if [ -x "$i/steam" ] && [ "$i/steam" != "$0" ]; then
                echo "$i/steam"
                break
            fi
        done
        IFS="$oldifs"
    )"

    if [ -z "$steampath" ]; then
        echo "Error, neither steam flatpak nor steam binary was found"
    else
        exec $steampath "$@"
    fi
fi
#exec /usr/bin/flatpak run --branch=stable --arch=x86_64 com.valvesoftware.Steam "$@"
