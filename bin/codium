#!/usr/bin/dash

PREFERRED='code-oss' # or codium
PREFERRED='codium'

flatpak_path='/var/lib/flatpak/exports/bin/com.vscodium.codium'

codium_paths="$(
    IFS=':'
    for i in $PATH; do
        i_path="$i/$PREFERRED"
        [ "$i_path" = "$0" ] && continue
        if [ -x "$i_path" ]; then
            echo "$i_path"
            break
        fi
    done
)"

if [ -n "${codium_paths:-}" ]; then
    exec $codium_paths "$@"
elif [ -f "$flatpak_path" ]; then
    flatpak run com.vscodium.codium "$@"
else
    notify-send -a "${0##*/}" 'Error' "Could not find VSCodium installation"
fi
